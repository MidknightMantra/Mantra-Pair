<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mantra Pair</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700&family=Space+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="preload" as="image" href="/assets/ov9irq.jpg" />
    <link rel="preload" as="image" href="/assets/q0q02r.jpg" />
    <link rel="preload" as="image" href="/assets/hfz2c3.jpg" />
    <link rel="stylesheet" href="/styles.css" />
    <script src="/app.js" defer></script>
  </head>

  <body>
    <main class="shell">
      <section class="info">
        <div class="kicker"><span class="dot"></span>Pair service</div>
        <h1 class="brand">Mantra <span>Pair</span></h1>
        <p class="sub">
          Link your WhatsApp account and receive your session in your own WhatsApp chat.
        </p>

        <div class="steps">
          <div class="step"><div class="n">01</div><div>Select Pairing Code or QR.</div></div>
          <div class="step"><div class="n">02</div><div>Open WhatsApp, go to Linked Devices.</div></div>
          <div class="step"><div class="n">03</div><div>Finish linking, then check your chat for the session.</div></div>
        </div>
      </section>

      <section class="panel">
        <div class="tabs" role="tablist" aria-label="Pairing mode">
          <button class="tab active" id="tab-code" type="button" role="tab" aria-selected="true">
            Pairing Code
          </button>
          <button class="tab" id="tab-qr" type="button" role="tab" aria-selected="false">
            QR Scan
          </button>
        </div>

        <div class="status" id="status" aria-live="polite">
          <div><span class="label">Status</span> <span id="statusText">Idle</span></div>
          <div class="hint" id="statusHint"></div>
        </div>

        <div class="error" id="error" role="status" aria-live="polite">
          <div class="errorRow">
            <div class="errorTitle">Issue</div>
            <div class="errorText" id="errorText"></div>
          </div>
          <div class="errorActions">
            <button class="secondary" id="btnSwitchToQr" type="button">Switch to QR</button>
            <button class="ghost" id="btnDismissError" type="button">Dismiss</button>
          </div>
        </div>

        <div id="mode-code" class="mode">
          <h2>Pair by phone number</h2>
          <p class="note">Enter full number with country code. Digits only. If it fails on Railway, QR is usually more reliable.</p>

          <label class="field">
            <span>Phone</span>
            <input id="phone" inputmode="numeric" maxlength="15" placeholder="254XXXXXXXXX" />
          </label>

          <button class="primary" id="btnCode" type="button">
            <span class="btnText" id="btnCodeText">Generate Pairing Code</span>
          </button>

          <div class="result" id="resultCode">
            <div class="chip">Use this in WhatsApp</div>
            <div class="codeBox"><div class="code" id="pairCode">----</div></div>
            <div class="how">
              <strong>Protocol</strong><br />
              1. WhatsApp -> Linked Devices<br />
              2. Link a Device -> Link with phone number<br />
              3. Enter this code<br />
              4. Check your own chat for the session
            </div>
            <button class="secondary" id="btnResetA" type="button">Start New Session</button>
          </div>
        </div>

        <div id="mode-qr" class="mode is-hidden">
          <h2>Pair by QR</h2>
          <p class="note">Generate a QR and scan it from WhatsApp Linked Devices.</p>

          <button class="primary" id="btnQr" type="button">
            <span class="btnText" id="btnQrText">Generate QR Code</span>
          </button>

          <div class="result" id="resultQr">
            <div class="chip">Scan from WhatsApp</div>
            <div class="qrBox" id="qrBox"></div>
            <div class="how">
              <strong>Protocol</strong><br />
              1. WhatsApp -> Linked Devices<br />
              2. Link a Device<br />
              3. Scan this QR<br />
              4. Check your own chat for the session
            </div>
            <button class="secondary" id="btnResetB" type="button">Start New Session</button>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
